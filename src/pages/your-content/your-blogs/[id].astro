---
import type { GetStaticPaths, InferGetStaticParamsType, InferGetStaticPropsType } from "astro";
import Layout from "../../../layouts/ComponentsLayout/Layout.astro";
import { getAllBlogs } from "../../../helpers/blog-requests";
import { BlogDisplay } from "../../../components/BlogDisplay/BlogDisplay";
export const getStaticPaths = async () => {
  const blogs = await getAllBlogs();
  return blogs?.map((blog) => {
    return {
      params: { id: blog.id },
      props: {
        title: blog.title,
        content: blog.content,
        createAt: blog.createdAt,
        updatedAt: blog.updatedAt,
        categories: blog.categories,
      },
    };
  });
};

type Params = InferGetStaticParamsType<typeof getStaticPaths>;
type Props = InferGetStaticPropsType<typeof getStaticPaths>;
const { title, content, categories } = Astro.props;
const { id } = Astro.params as Params;
---

<Layout title='Bolg'>
  <BlogDisplay title={title} blogPost={content} categories={categories as any} />
</Layout>
